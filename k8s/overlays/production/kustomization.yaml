apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: production

resources:
- ../../base

patchesStrategicMerge:
- deployment-patch.yaml
- configmap-patch.yaml
- hpa.yaml

images:
- name: ghcr.io/lavoro-ai-ferri/backend
  newTag: latest

replicas:
- name: lavoro-backend
  count: 3

commonLabels:
  environment: production
  version: production

configMapGenerator:
- name: lavoro-config-production
  literals:
  - cors-origin=https://app.lavoro-ai-ferri.com
  - log-level=info
  - rate-limit-max-requests=100
  - db-max-connections=50

# Production secrets should be managed externally
# This is just for reference
secretGenerator:
- name: lavoro-secrets-production
  literals:
  - jwt-secret=CHANGE_ME_IN_PRODUCTION
  - jwt-refresh-secret=CHANGE_ME_IN_PRODUCTION
